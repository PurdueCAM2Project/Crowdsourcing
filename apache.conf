<Directory '${FAIRVISIONAPPDIR}/csgame'>
	AllowOverride None
	<IfVersion < 2.4>
			Order allow,deny
			Allow from all
	</IfVersion>
	<IfVersion >= 2.4>
			Require all granted
	</IfVersion>
</Directory>

<Directory '${FAIRVISIONAPPDIR}/staticfiles'>
	Options FollowSymLinks Indexes MultiViews
	IndexOptions FancyIndexing HTMLTable
	AllowOverride None
	<IfVersion < 2.4>
			Order allow,deny
			Allow from all
	</IfVersion>
	<IfVersion >= 2.4>
			Require all granted
	</IfVersion>
</Directory>

<IfDefine TESTING>
	<VirtualHost *:80>
		ServerName fairvision.app.local

	  WSGIDaemonProcess fairvision.app processes=2 threads=15 display-name=%{GROUP}
	  WSGIProcessGroup fairvision.app

		WSGIScriptAlias / '${FAIRVISIONAPPDIR}/csgame/wsgi.py'

	  Alias /static '${FAIRVISIONAPPDIR}/staticfiles'
	</VirtualHost>
</IfDefine>

<IfDefine !TESTING>
	<VirtualHost *:80>
		ServerName fairvision.app
		ProxyPreserveHost On
		Redirect permanent / https://fairvision.app/
	</VirtualHost>
	<VirtualHost *:443>
		ServerName fairvision.app

	  WSGIDaemonProcess fairvision.app processes=2 threads=15 display-name=%{GROUP}
	  WSGIProcessGroup fairvision.app

		WSGIScriptAlias / '${FAIRVISIONAPPDIR}/csgame/wsgi.py'

	  Alias /static '${FAIRVISIONAPPDIR}/staticfiles'

		SSLEngine On
		SSLCertificateFile '${PWD}/myenv/certs/fairvision.app.pem'
		SSLCertificateKeyFile '${PWD}/myenv/certs/fairvision.app.key.pem'
	</VirtualHost>
</IfDefine>
